{% extends 'admin/base/base.html' %}

{% load static %}

{% block title %}Nuevo contratista{% endblock %}

{% block section_title %}Contratistas{% endblock %}

{% block main %}
<h2 class="title" style="margin-top:0;">Contratistas</h2>
<div class="row">
    <div class="col-md-12">

        <div class="card">
            <div class="content table-full-width">
                <div class="toolbar text-right" style="padding:10px 20px 20px;">
                    <a class="btn btn-fill btn-success" href="{% url 'contractors:new' %}">
                        Agregar contratista
                    </a>
                </div>
                <div class="fresh-datatables">
                    <table id="datatables" class="table table-no-bordered table-hover" cellspacing="0" width="100%" style="width:100%">
                    <thead>
                        <tr>
                            <th>Nombre</th>
                            <th>Cargo</th>
                            <th>Teléfono</th>
                            <th>Móvil</th>
                            <th>Correo</th>
                            <th class="disabled-sorting">Actions</th>
                        </tr>
                    </thead>

                    <tbody>

                        {% for contractor in contractors %}
                        <tr>
                            <td>{{contractor.get_full_name}}</td>
                            <td>{{contractor.get_type_display}}</td>
                            <td>{{contractor.phone}}</td>
                            <td>{{contractor.mobile}}</td>
                            <td>{{contractor.email}}</td>
                            <td>
                                <a href="{% url 'contractors:view' contractor.id %}" class="btn btn-simple btn-success btn-icon edit"><i class="ti-eye"></i></a>
                                <a href="{% url 'contractors:edit' contractor.id %}" class="btn btn-simple btn-warning btn-icon edit"><i class="ti-pencil-alt"></i></a>
                                <a href="#" class="btn btn-simple btn-danger btn-icon like"><i class="ti-lock"></i></a>
                            </td>
                        </tr>
                        {% endfor %}
                       </tbody>
                    </table>
                </div>


            </div>
        </div><!--  end card  -->
    </div> <!-- end col-md-12 -->
</div>
{% endblock %}


{% block script %}
    <!--  Plugin for DataTables.net  -->
	<script src="{% static 'assets/js/jquery.datatables.js' %}"></script>

    <script type="text/javascript">
	    $(document).ready(function() {

	        $('#datatables').DataTable({
	            "pagingType": "full_numbers",
	            "lengthMenu": [[10, 25, 50, -1], [10, 25, 50, "All"]],
	            responsive: true,
	            language: {
	            search: "_INPUT_",
		            searchPlaceholder: "Search records",
		        }
	        });


	        var table = $('#datatables').DataTable();
	         // Edit record

	         // Delete a record
	         table.on( 'click', '.remove', function (e) {
	            $tr = $(this).closest('tr');
	            table.row($tr).remove().draw();
	            e.preventDefault();
	         } );

	        //Like record
	        table.on( 'click', '.like', function () {
	            alert('You clicked on Like button');
	         });

	    });
</script>
{% endblock %}